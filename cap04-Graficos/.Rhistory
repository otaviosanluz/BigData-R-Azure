y
ldply(y,sum)
# strsplit()
# Divide uma string ou vetor de caracteres
texto <- 'Data Science Academy'
strsplit(texto, " ")
dates <- c('1998-05-23','2008-09-13','1977-01-30')
temp <- strsplit(dates,'-')
temp
class(temp)
# Transforma a lista em matriz, fazendo antes um unlist()
matrix(unlist(temp), ncol = 3, byrow = T)
names <- c('brian, miguel','raquel, moraes','joao, teixeira',
'dorsey, jack','glass, noah','mirian, leite')
temp <- strsplit(names,',')
temp
names <- c('brian, miguel','raquel, moraes','joao, teixeira',
'dorsey, jack','glass, noah','mirian, leite')
cofounded <- rep(c('google','twitter'),c(2,4))
temp <- strsplit(names,',')
temp
temp <- strsplit(names,', ')
temp
palavras <- strsplit(frase,' ')[[1]]
frase <- 'Muitas vezes temos que repetir algo várias vezes para conseguir aprender'
palavras <- strsplit(frase,' ')[[1]]
palavras
unique(tolower(palavras))
palavras <- strsplit(frase,' ')
palavras
# strsplit() com dataframes
antes = data.frame(attr = c(1,30,4,6), tipo = c('pao_e_agua','pao_e_agua_2'))
antes
strsplit(as.character(antes$tipo),'_e_')
a = strsplit(as.character(antes$tipo),'_e_')
class(a)
library(stringr)
str_split_fixed(antes$tipo, '_e_',2)
# Usando do.call()
antes = data.frame(attr = c(1,30,4,6), tipo = c('pao_e_agua','pao_e_agua_2'))
antes
depois <- strsplit(as.character(antes$tipo),'_e_')
depois
do.call(rbind,depois)
# Usando dplyr e tidyr
library(dplyr)
library(tidyr)
antes <- data.frame(
attr = c(1,30,4,6),
tipo = c('pao_e_agua','pao_e_agua_2')
)
antes
antes %>%
separate(tipo,c('pao','agua'),'_e_')
search()
str <- c("Expressões", "regulares", "em linguagem R",
"permitem a busca de padrões", "e exploração de textos",
"podemos buscar padrões em dígitos",
"como por exemplo",
"10992451280")
length(str)
str
# grep()
grep('ex',str,value = F)
grep('ex',str,value = T)
grep('\\d',str,value = F)
grep('\\d'str,value = T)
grep('\\d',str,value = T)
# grepl()
grepl('\\d+', str)
grepl('\\D', str)
# gsub() => substituindo padrões
gsub('em', '***', str)
gsub('ex', 'EX', str)
# sub()
sub('em', 'EM', str)
# regexpr()
frase <- "Isso é uma string."
regexpr(pattern = "u", frase) # aonde esta a letra u?
frase[[8]]
frase[8]
# Hora e Data do sistema
hoje <- Sys.Date() # data atual
hoje
class(hoje)
Sys.time() # horário atual
Sys.timezone()
# Formatando a saída - as.Date()
as.Date('2018-06-28')
as.Date('Jun-28-18', format = '%b-%d-%y')
as.Date("28 June, 2018", format = "%d %B, %Y")
# Função format()
Sys.Date()
format(Sys.Date(), format = '%d %B, %Y')
format(Sys.Date(), format = 'Hoje é %A')
# Exercício 1 - Pesquise pela função que permite listar todos os arquivo no diretório de trabalho
dir()
df <- data.frame(v1 = c('a','b','c','d','e'), v2 = c(T,F,F,T,T), v3 = c(1:5))
df
class(df)
?rep
# Criando o vetor
vec <- c(10,5,43,11,2,-9,0,17,-22,90,3)
vec
class(vec)
typeof(vec)
for i in vec:{
if (i > 10):
print(i)
}
for (i in vec){
if (i > 10){
print(i)}
}
# Exercício 4 - Conisdere a lista abaixo. Crie um loop que imprima no console cada elemento da lista
lst <- list('oi',10,T,-22,'otavio',55)
for (i in lst){print(i)}
mat1 <- matrix(c(1:50), nrow = 5, ncol = 5, byrow = T)
mat1
mat2 <- t(mat1)
mat2
# Multiplicação element-wise
mat1*mat2
# Multiplicação de matrizes
mat1%<%mat2
# Multiplicação de matrizes
mat1 %<% mat2
# Multiplicação de matrizes
mat1%*%mat2
vec <- c(1:10)
mat1 <- matrix(c(1:9), nrow = 3, ncol = 3)
lst <- list(22:32)
df <- data.frame(v1 = c('a','b','c','d','e'), v2 = c(T,F,F,T,T), v3 = c(1:5))
?names
mat2 <- matrix(1:90, 10)
mat2
?sample
mat1 <- matrix(c(1:50), nrow = 5, ncol = 5, byrow = T)
mat1
apply(mat1,1,sum)
apply(mat1,2,sum)
a <- c(100, 10, 10000, 1000)
a
sort(a)
mat1 <- matrix(c(1:50), nrow = 5, ncol = 5, byrow = T)
mat1
for (i in mat1) {
if (i > 15){
print(i)}
}
mat2 <- matrix(1:90, 10)
mat2
sample(mat1,50)
sample(mat2,50)
sample(mat2,50,replace = T)
sample(mat2,50,replace = F)
sample(mat2,50,replace = F)
apply(mat2,1,sample(mat2,50) <- NA)
sample(mat2,50)
sample(mat2,50) <- NA
NA <- sample(mat2,50)
b <- sample(mat2,50)
b
b <- NA
b
# Exercício 1 - Pesquise pela função que permite listar todos os arquivo no diretório de trabalho
dir()
list.files()
df <- data.frame(v1 = c('a','b','c','d','e'), v2 = c(T,F,F,T,T), v3 = c(1:5))
df
class(df)
vec <- c(10,5,43,11,2,-9,0,17,-22,90,3)
vec
class(vec)
for (i in vec){
if (i > 10){
print(i)
print('Este elemento é maior que 10')
}  else }
print(i)
print('Este elemento é menor que 10')
}
for (i in vec){
if (i > 10){
print(i)
print('Este elemento é maior que 10')
}  else }
print(i)
print('Este elemento é menor que 10')
}
}
for (i in vec){
if (i > 10){
print(i)}
}
for (i in vec){
if (i > 10){
print(i)
print('Este número é maior que 10.')}
}
lst <- list('oi',10,T,-22,'otavio',55)
for (i in lst){print(i)}
# Exercício 4 - Conisdere a lista abaixo. Crie um loop que imprima no console cada elemento da lista
lst <- list('oi',10,T,-22,'otavio',55)
lst
# Exercício 6 - Crie um vetor, matriz, lista e dataframe e faça a nomeação de cada um dos objetos
vec <- c(1:5)
vec
names(vec) <- c('col1','col2','col3','col4','col5')
vec
names(mat1) <- c('col1','col2','col3')
mat1 <- matrix(c(1:9), nrow = 3, ncol = 3)
names(mat1) <- c('col1','col2','col3')
mat1
mat1 <- matrix(c(1:9), nrow = 3, ncol = 3)
dimnames(mat1) <- list(c('obs1','obs2','obs3'), c('var1','var2','var3'))
mat1
lst <- list(22:25)
names(lst) <- c('dim1','dim2','dim3','dim4')
lst <- list(1,'c',4,c(1:3))
names(lst) <- c('dim1','dim2','dim3','dim4')
lst
df <- data.frame(v1 = c('a','b','c','d','e'), v2 = c(T,F,F,T,T), v3 = c(1:5))
colnames(df) <- c('caracteres','logico','integer')
rownames(df) <- c('obs1','obs2','obs3')
df
rownames(df) <- c('obs1','obs2','obs3','obs4','obs5')
df
mat2 <- matrix(1:90, 10)
mat2
mat2[sample(1:50,10)] = NA
mat2
a <- c(100, 10, 10000, 1000)
a
sort(a)
order(a)
# Plot básico
x = 5:7
y = 8:10
plot(x,y)
largura = c(55,43,23,78,16)
plot(altura,largura)
altura = c(143,123,155,189,121)
plot(altura,largura)
# Plotando um dataframe
plot(lynx)
# Plotando um dataframe
?lynx
View(lynx)
plot(lynx)
plot(lynx, ylab = 'Plots com Dataframes', x = '')
plot(lynx, ylab = 'Plots com Dataframes', xlab = '')
plot(lynx, ylab = 'Plots com Dataframes', xlab = 'Observações')
plot(lynx, main = 'Plots com Dataframes', col = 'red')
plot(lynx, main = 'Plots com Dataframes', col = 'red', col.main = 52, cex.main = 1.5)
library(datasets)
hist(warpbreaks$breaks)
airquality
transform(airquality, Month = factor(Month))
boxplot(Ozone ~ Month, aiquality, xlab = 'Month', ylab = 'Ozone(ppb)')
boxplot(Ozone ~ Month, airquality, xlab = 'Month', ylab = 'Ozone(ppb)')
par()
par('pch')
par('lty')
?par
x = 2:4
plot(x, pch = 'c')
par(mfrow = c(2,2), col.axis = 'red')
plot(1:8,l las = 0, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 0, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 1, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 1, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
par(mfrow = c(2,2), col.axis = 'red')
plot(1:8, las = 1, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
par(mfrow = c(2,2), col.axis = 'red')
plot(1:8, las = o, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 1, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 1')
plot(1:8, las = 2, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 2')
plot(1:8, las = 3, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 3')
par(mfrow = c(2,2), col.axis = 'red')
plot(1:8, las = o, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 0, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
par(mfrow = c(2,2), col.axis = 'red')
plot(1:8, las = 0, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 0')
plot(1:8, las = 1, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 1')
plot(1:8, las = 2, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 2')
plot(1:8, las = 3, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 3')
legend('topright', pch = 1, col = c('blue','red'), legend = c('var1','var2'))
par(mfrow = c(1,1))
plot(1:8, las = 3, xlab = 'xlab', ylab = 'ylab', main = 'LAS = 3')
legend('topright', pch = 1, col = c('blue','red'), legend = c('var1','var2'))
# Cores disponíveis
colors()
# png
png('grafico1.png', width = 500, height = 500, res = 72)
plot(iris$Sepal.Length, iris$Petal.Length,
col = iris$Species,
main = 'Gráfico gerado a partir do Iris')
dev.off()
png('grafico1.png', width = 500, height = 500, res = 72)
plot(iris$Sepal.Length, iris$Petal.Length,
col = iris$Species,
main = 'Gráfico gerado a partir do Iris')
dev.off()
png('grafico1.png', width = 500, height = 500, res = 72)
plot(iris$Sepal.Length, iris$Petal.Length,
col = iris$Species,
main = 'Gráfico gerado a partir do Iris')
dev.off()
getwd()
# Diretório de trabalho
setwd('C:\Users\otavio\Mundo\Github\BigData-R-Azure\cap04-Graficos')
# Diretório de trabalho
setwd('C:/Users/otavioMundo/Github/BigData-R-Azure/cap04-Graficos')
getwd()
getwd()
# Diretório de trabalho
setwd('C:/Users/otavioMundo/Github/BigData-R-Azure/cap04-Graficos')
# Diretório de trabalho
setwd('C:/Users/otavio/Mundo/Github/BigData-R-Azure/cap04-Graficos')
getwd()
# png
png('grafico1.png', width = 500, height = 500, res = 72)
plot(iris$Sepal.Length, iris$Petal.Length,
col = iris$Species,
main = 'Gráfico gerado a partir do Iris')
dev.off()
# pdf
pdf('grafico2.pdf')
plot(iris$Sepal.Length, iris$Petal.Length,
col = iris$Species,
main = 'Gráfico gerado a partir do Iris')
dev.off()
library(plotrix)
par(mfrow = c(1,1), col.axis = "red")
plot(1:6, las = 3, xlab = "lty 1:6", ylab = "", main = "Mais opções ao plot")
library(plotrix)
install.packages('plotrix') # Acessórios de plotagem
library(plotrix)
par(mfrow = c(1,1), col.axis = "red")
plot(1:6, las = 3, xlab = "lty 1:6", ylab = "", main = "Mais opções ao plot")
ablineclip(v=1, lty=1, col="sienna2", lwd=2)
install.packages('plotrix') # Acessórios de plotagem
install.packages("plotrix")
library(plotrix)
par(mfrow = c(1,1), col.axis = "red")
plot(1:6, las = 3, xlab = "lty 1:6", ylab = "", main = "Mais opções ao plot")
ablineclip(v=1, lty=1, col="sienna2", lwd=2)
ablineclip(v=2, lty=1, col="sienna2", lwd=2)
ablineclip(v=3, lty=1, col="sienna2", lwd=2)
ablineclip(v=4, lty=1, col="sienna2", lwd=2)
ablineclip(v=5, lty=1, col="sienna2", lwd=2)
ablineclip(v=6, lty=1, col="sienna2", lwd=2)
ablineclip(v=7, lty=1, col="sienna2", lwd=2)
plot(lynx)
plot(lynx, type="o", main="Type o")
plot(lynx, type="s", main="Type s")
plot(lynx, type="n", main="Type n")
plot(lynx, type="b", main="Type b")
# Dois plots juntos
par(mar = c(4,3,3,3), col.axis = 'black')
plot(cars$speed, type = 's', col = 'red', bty = 'n', xlab = 'Cars ID', ylab = '')
text(8, 14, 'Velocidade', cex = 0.85, col = 'red')
par(new = TRUE)
plot(cars$dist, type="s", bty="n", ann=F, axes=F, col="darkblue")
axis(side=4)
text(37, 18, "Distância", cex=0.85, col="darkblue")
title(main="Velocidade x Distância")
# Plots a partir de datasets
df <- read.csv('pibpercap.csv', stringsAsFactors = F)
df_1982 <- subset(df, ano == 1982)
plot(expectativa ~ pibpercap, data = df_1982, log = "x")
getwd()
# Define os dados
set.seed(67)
x = rnorm(10,5,7)
y = rpois(10,7)
z = rnorm(10,6,7)
t = rpois(10,9)
x
class(x)
y
?cex.main
?plot
# Plot
plot(x,y,col = 123,pch = 10, main = 'Multi Scatterplot',
col.main = 'red',cex.main = 1.5, xlab = 'Variável Independente',
ylab = 'Variável Dependente')
# Plot
plot(x,y,col = 123,pch = 10, main = 'Multi Scatterplot',
col.main = 'red',cex.main = 0.1, xlab = 'Variável Independente',
ylab = 'Variável Dependente')
# Plot
plot(x,y,col = 123,pch = 10, main = 'Multi Scatterplot',
col.main = 'red',cex.main = 1.5, xlab = 'Variável Independente',
ylab = 'Variável Dependente')
# Adiciona pontos
points(z,t,col = 'blue',pch = 4)
# Adiciona pontos
points(y,t,col = 777,pch = 9)
# Cria legenda
legend(-6,5.9,legend = c('Nível 1','Nível 2','Nível 3'),
col = c(123,'blue',777),pch = c(10,4,9),
cex = 0.65,btv = 'n')
# Cria legenda
legend(-6,5.9,legend = c('Nível 1','Nível 2','Nível 3'),
col = c(123,'blue',777),pch = c(10,4,9),
cex = 0.65,bty = 'n')
# Cria legenda
legend(-6,5.9,legend = c('Nível 1','Nível 2','Nível 3'),
col = c(123,'blue',777),pch = c(10,4,9),
cex = 0.65)
# Anexando o dataset
attach(sleep)
# Boxplort
sleepbpxplot = boxplot(data = sleep,extra ~ group,
main = 'Duração do Sono',
col.main = 'red',ylab = 'Horas',xlab = 'Droga')
# Calculo da média
medias = by(extra,group,mean)
# Adiciona as médias no gráfico
points(medias,col = 'red')
# Boxplot na horizontal
horizontalbpxplot = boxplot(data = sleep,extra ~ group,
main = 'Duração do Sono',
col.main = 'red',ylab = 'Horas',xlab = 'Droga',
horizontal = T)
# Adicionando cores
horizontalbpxplot = boxplot(data = sleep,extra ~ group,
main = 'Duração do Sono',
col.main = 'red',ylab = 'Horas',xlab = 'Droga',
horizontal = T,col = c('red','blue'))
dados = cars$speed
# construindo um histograma
hist(dados)
hist(dados,breaks = 10,main = 'Histograma das Velocidades')
hist(dados,labels = T,breaks = c(0,5,10,20,30),main = 'Histograma das Velocidades')
hist(dados,labels = T,breaks = 10,main = 'Histograma das Velocidades')
hist(dados,labels = T,breaks = 10,main = 'Histograma das Velocidades')
hist(dados,labels = T,breaks = 10,main = 'Histograma das Velocidades')
hist(dados,labels = T,ylim = c(0,10),breaks = 10,main = 'Histograma das Velocidades')
# adicionando linhas ao histograma
grafico = hist(dados,breaks = 10,main = 'Histograma das Velocidades')
xaxis = seq(min(dados),max(dados),length = 10)
yaxis = dnorm(xaxis,mean = mean(dados),sd = sd(dados))
yaxis = yaxis*diff(grafico$mids)*length(dados)
lines(xaxis,yaxis,col = 'red')
?seq
seq(1,10)
seq(1,10,2)
xaxis
yaxis
grafico
lines(xaxis,yaxis,col = 'red')
# Preparando os dados - Número de casamentos em um igreja de SP
dados <- matrix(c(652,1537,598,242,36,46,38,21,218,237,106,67),nrow = 3,byrow = T)
dados
# Nomeando linhas e colunas da matriz
colnames(dados) <- c('0','1-150','151-300','>300')
rownames(dados) <- c('jovem','adulto','idoso')
dados
# Construindo o BarPLot
barplot(dados,beside = T)
barplot(dados)
# Construindo o plot - Stacked Bar Plot
# As 3 faixas de idade são representadas na mesma coluna para as diferentes quantidades
barplot(dados,col = c('red','blue','black'))
# Crie uma legenda para o gráfico anterior
colors()
?barplot
# Construindo o plot - Stacked Bar Plot
# As 3 faixas de idade são representadas na mesma coluna para as diferentes quantidades
barplot(dados,col = c('red','blue','black'))
dados
# Construindo o plot - Stacked Bar Plot
# As 3 faixas de idade são representadas na mesma coluna para as diferentes quantidades
barplot(dados,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso'))
barplot(dados,col = c('red','blue','black'))
barplot(dados,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso')
barplot(dados,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso')
barplot(dados,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso'))
# Agora temos uma coluna para cada faixa etária, mas na mesma faixa de quantidade
barplot(dados,beside = T,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso'))
# Com a transposta da matriz, invertemos as posições entre faixa etária e faixa de quantidade
barplot(t(dados),beside = T,col = c('red','blue','black'),legend.text = c('jovem','adulto','idoso'))
# Com a transposta da matriz, invertemos as posições entre faixa etária e faixa de quantidade
barplot(t(dados),beside = T,col = c('red','blue','black','green'),legend.text = c('jovem','adulto','idoso'))
# Com a transposta da matriz, invertemos as posições entre faixa etária e faixa de quantidade
barplot(t(dados),beside = T,col = c('red','blue','black','green'))
# Com a transposta da matriz, invertemos as posições entre faixa etária e faixa de quantidade
barplot(t(dados),beside = T,col = c('red','blue','black','green'),legend.text = c('0','1-150','151-300','>300'))
# Criando fatias
fatias = c(40,20,40)
# Nomeando os labels
paises = c('Brasil','Argentina','Chile')
# Unindo fatias e países
paises = paste(paises,fatias)
paises
# Incluindo detalhes no label
paises = paste(paises,'%',sep = '')
paises
colors()
# Construindo um gráfico
pie(fatias,labels = paises,
col = c('darksalmon','gainsboro','lemonchiffon4'),
main = 'Distribuição de Vendas')
# Trabalhando com dataframes
attach(iris)
values = table(Species)
values
labels = paste(names(values))
pie(values,labels = labels,main = 'Distribuição de Espécies')
